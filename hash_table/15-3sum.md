### [15. 三数之和](https://leetcode.cn/problems/3sum/)

- 中等

给你一个包含 `n` 个整数的数组 `nums`，判断 `nums` 中是否存在三个元素 *a，b，c ，*使得 *a + b + c =* 0 ？请你找出所有和为 `0` 且不重复的三元组。

**注意：**答案中不可以包含重复的三元组。

**示例 1：**

```
输入：nums = [-1,0,1,2,-1,-4]
输出：[[-1,-1,2],[-1,0,1]]
```

**示例 2：**

```
输入：nums = []
输出：[]
```

**示例 3：**

```
输入：nums = [0]
输出：[]
```

**提示：**

- `0 <= nums.length <= 3000`
- `-105 <= nums[i] <= 105`

**解法一：排序+双指针**

- 首先无序的数组直接三重循环找会有问题：会找到很多重复的三元组，比如全是`0`的话，会找到很多个`[0, 0, 0]`

- 其次排序后的数组也会出现此问题，比如`[-1, -1, 0, 0, 1, 1, 1]`这样的数组就会出现多个`[-1, 0, 1]`这样的重复三元组。解决方式是：在循环开始时判断条件，`i`，`j`，`k`是否是每次循环的第一个元素，是的话就进入循环，或者当前元素不等于前一个元素（要找到当前指针指向的下一个不同元素），也可进入循环
- 在第二点的基础上三层循环会超时，所以要优化

考虑到数组非降序排列，每次移动`j`指针时，`a+b`都会变大，所以`k`一定要变小，所以可以让`j`在循环时，`k`一直减，直到`a+b+c`小于等于`0`或`j=k`，每次`j`重新从`i+1`开始循环时，重置`k`，同时注意检查`j=k`要跳出此次循环

```python
# 直接三重循环会超时
class Solution:
    def threeSum(self, nums: List[int]) -> List[List[int]]:
        res = []
        nums.sort()
        for i in range(len(nums)):
            if i == 0 or nums[i] != nums[i-1]:
                # 每次j重新从i+1开始遍历，k就要归位
                k = len(nums) - 1
                for j in range(i+1, len(nums)):
                    if j == i+1 or nums[j] != nums[j-1]:
                        while j < k and nums[i] + nums[j] + nums[k] > 0:
                            k -= 1
                        # 如果两指针重合，就退出循环
                        if j == k:
                            break
                        if nums[i] + nums[j] + nums[k] == 0:
                            res.append([nums[i], nums[j], nums[k]])
        return res
```

